# 三Agent联合Framework用户界面设计详细说明

## 界面设计原则

1. **渐进式披露**：按阶段展示信息，避免信息过载
2. **实时反馈**：每个操作都有即时的视觉反馈
3. **错误预防**：通过界面设计减少用户操作错误
4. **数据透明**：所有计算过程和依据都可查看

## 详细界面设计

### 1. 主界面 - 项目管理

```
┌─────────────────────────────────────────────────────────────────────┐
│ 🏢 建筑面积计算Framework                           [👤用户] [⚙️设置] │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  📁 我的项目                                          [+ 新建项目]  │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 📋 项目列表                                                 │   │
│  │                                                             │   │
│  │ 🏗️ 办公楼A栋面积计算        2024-01-15  [继续] [删除]      │   │
│  │    状态: 第三阶段 - 面积计算中                              │   │
│  │    进度: ████████████████████████████████████████ 85%      │   │
│  │                                                             │   │
│  │ 🏠 住宅小区B区面积计算      2024-01-10  [继续] [删除]      │   │
│  │    状态: 已完成                                            │   │
│  │    结果: 总面积 2,450.8 m²                                 │   │
│  │                                                             │   │
│  │ 🏪 商业综合体C座面积计算    2024-01-08  [继续] [删除]      │   │
│  │    状态: 第二阶段 - 等待审核                               │   │
│  │    待审核: 12个元素                                        │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  📊 统计信息                                                        │
│  • 本月完成项目: 5个                                               │
│  • 总计算面积: 15,680.5 m²                                         │
│  • 平均处理时间: 25分钟                                            │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 2. 新建项目界面

```
┌─────────────────────────────────────────────────────────────────────┐
│ 🆕 新建项目                                        [← 返回] [❌ 取消] │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  📝 项目基本信息                                                    │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 项目名称: [________________________]                        │   │
│  │                                                             │   │
│  │ 建筑类型: [住宅 ▼]  地区: [香港 ▼]  币种: [HKD ▼]          │   │
│  │                                                             │   │
│  │ 项目描述: [_________________________________]               │   │
│  │          [_________________________________]               │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  📄 上传文件                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 法规文件 (PDF)                                              │   │
│  │ ┌─────────────────────────────────────────────────────┐     │   │
│  │ │     📎 拖拽PDF文件到此处或点击选择文件              │     │   │
│  │ │                                                     │     │   │
│  │ │     支持格式: PDF (最大50MB)                        │     │   │
│  │ └─────────────────────────────────────────────────────┘     │   │
│  │                                                             │   │
│  │ IFC模型文件                                                 │   │
│  │ ┌─────────────────────────────────────────────────────┐     │   │
│  │ │     🏗️ 拖拽IFC文件到此处或点击选择文件              │     │   │
│  │ │                                                     │     │   │
│  │ │     支持格式: IFC (最大200MB)                       │     │   │
│  │ └─────────────────────────────────────────────────────┘     │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│                                    [🚀 创建项目并开始分析]         │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 3. 第一阶段 - 法规分析界面

#### 3.1 分析进行中
```
┌─────────────────────────────────────────────────────────────────────┐
│ 📋 项目: 办公楼A栋面积计算                          [⏸️ 暂停] [❌ 停止] │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  🔄 第一阶段: 法规分析                                              │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ ⏱️ 分析进度                                                  │   │
│  │                                                             │   │
│  │ 总体进度: ████████████████████████████████████████ 75%      │   │
│  │ 预计剩余时间: 2分30秒                                       │   │
│  │                                                             │   │
│  │ 当前任务: 分析覆盖/围护构件规则                             │   │
│  │ ████████████████████████████████████████████████ 90%       │   │
│  │                                                             │   │
│  │ 📊 已完成任务:                                              │   │
│  │ ✅ 文档预处理 (2.1MB PDF → 文本)                           │   │
│  │ ✅ 层高相关规则提取 (发现3条规则)                           │   │
│  │ 🔄 覆盖/围护构件规则提取 (已发现8条规则)                   │   │
│  │ ⏳ 特殊用途空间规则提取                                     │   │
│  │ ⏳ 规则验证和格式化                                         │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  📝 实时日志                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ [14:23:45] 开始分析香港建筑面积计算规则...                  │   │
│  │ [14:23:48] 文档解析完成，共129页                            │   │
│  │ [14:24:12] 提取层高规则: "层高不少于2.2米计入全部面积"     │   │
│  │ [14:24:35] 提取阳台规则: "无围护露台不计入建筑面积"        │   │
│  │ [14:24:58] 提取电梯井规则: "电梯井计入全部建筑面积"        │   │
│  │ [14:25:12] 正在分析停车位相关规则...                        │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

#### 3.2 分析完成结果展示
```
┌─────────────────────────────────────────────────────────────────────┐
│ ✅ 第一阶段完成: 法规分析                           [📄 导出] [➡️ 下一步] │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  📊 分析结果摘要                                                    │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 🎯 提取成功率: 96%                                          │   │
│  │ ⏱️ 处理时间: 3分42秒                                        │   │
│  │ 📏 层高规则: 3条                                            │   │
│  │ 🏠 覆盖/围护规则: 12条                                      │   │
│  │ 🚗 特殊用途规则: 8条                                        │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  📋 详细规则列表                                [🔍 查看全部]        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 📏 层高相关规则                                             │   │
│  │ ├─ ✅ 全计入: 层高 ≥ 2.2m                                  │   │
│  │ ├─ ⚠️ 半计入: 1.2m ≤ 层高 < 2.2m                          │   │
│  │ └─ ❌ 不计入: 层高 < 1.2m                                  │   │
│  │                                                             │   │
│  │ 🏠 覆盖/围护构件规则                                        │   │
│  │ ├─ ✅ 电梯井: 全计入                                        │   │
│  │ ├─ ✅ 楼梯间: 全计入                                        │   │
│  │ ├─ ⚠️ 有围护阳台: 半计入                                   │   │
│  │ ├─ ❌ 无围护露台: 不计入                                    │   │
│  │ ├─ ❌ 雨篷: 不计入                                          │   │
│  │ └─ ... [展开查看更多]                                       │   │
│  │                                                             │   │
│  │ 🚗 特殊用途空间规则                                         │   │
│  │ ├─ ❌ 停车位: 不计入                                        │   │
│  │ ├─ ❌ 设备房: 不计入                                        │   │
│  │ ├─ ⚠️ 地下室: 条件计入                                     │   │
│  │ └─ ... [展开查看更多]                                       │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ⚠️ 需要注意的规则                                                  │
│  • 阳台计入规则存在条件限制，需在后续阶段仔细识别                   │
│  • 地下室计入条件复杂，建议人工确认                                 │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 4. 第二阶段 - 语义对齐界面

#### 4.1 对齐分析进行中
```
┌─────────────────────────────────────────────────────────────────────┐
│ 🔄 第二阶段: 语义对齐分析                           [⏸️ 暂停] [❌ 停止] │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  📊 IFC文件信息                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 📁 文件: office_building_A.ifc (45.2MB)                     │   │
│  │ 🏗️ 元素总数: 1,247个                                        │   │
│  │ 🏢 楼层数: 15层 + 2层地下室                                 │   │
│  │ 📐 建筑高度: 52.8m                                          │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  🔄 对齐进度                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 总体进度: ████████████████████████████████████████ 68%      │   │
│  │ 预计剩余时间: 4分15秒                                       │   │
│  │                                                             │   │
│  │ 📋 处理阶段:                                                │   │
│  │ ✅ IFC元素提取 (1,247个元素)                               │   │
│  │ ✅ 垂直空间检测 (17个空间)                                 │   │
│  │ ✅ A类功能语义对齐 (980个元素) - 95%置信度                 │   │
│  │ 🔄 B类几何-法规对齐 (267个元素) - 当前68%                  │   │
│  │ ⏳ 置信度评估和审核标记                                     │   │
│  │                                                             │   │
│  │ 🎯 当前任务: 分析阳台围护情况                               │   │
│  │ ████████████████████████████████████████████████ 85%       │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  📈 实时统计                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 高置信度 (≥80%): 1,089个 ████████████████████████ 87%      │   │
│  │ 中置信度 (50-80%): 132个 ████ 11%                          │   │
│  │ 低置信度 (<50%): 26个 ▌ 2%                                 │   │
│  │                                                             │   │
│  │ 需要审核: 26个元素                                          │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

#### 4.2 人工审核界面
```
┌─────────────────────────────────────────────────────────────────────┐
│ 👁️ 人工审核 - 低置信度元素                          [💾 保存] [➡️ 继续] │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  📊 审核进度: 第 3/26 个元素                                        │
│  ████████████████████████████████████████████████████████████ 12%   │
│                                                                     │
│  🔍 当前审核元素                                                    │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 🆔 元素ID: 3zXy_s_s_1A9_s_s_s_15                            │   │
│  │ 🏗️ IFC类型: IfcSpace                                        │   │
│  │ 📍 位置: 3层东南角                                          │   │
│  │ 📐 面积: 25.6 m²                                            │   │
│  │ 📏 层高: 2.8m                                               │   │
│  │                                                             │   │
│  │ 🤖 AI建议分类: 半计入面积                                   │   │
│  │ 🎯 置信度: 45% (低)                                         │   │
│  │ 💭 推理过程:                                                │   │
│  │    1. 识别为阳台空间                                        │   │
│  │    2. 检测到部分围护结构                                    │   │
│  │    3. 围护程度不明确，建议人工确认                          │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  🖼️ 3D可视化                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                    [3D模型视图]                             │   │
│  │                                                             │   │
│  │     🏗️ 显示该空间在建筑中的位置                            │   │
│  │     🔍 高亮显示围护结构                                     │   │
│  │     📐 显示尺寸标注                                         │   │
│  │                                                             │   │
│  │  [🔄 旋转] [🔍 缩放] [📷 截图] [📏 测量]                   │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ✋ 人工决策                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 请选择该元素的面积计算方式:                                 │   │
│  │                                                             │   │
│  │ ⚪ 全计入面积 (100%)                                        │   │
│  │ 🔘 半计入面积 (50%) ← AI建议                               │   │
│  │ ⚪ 不计入面积 (0%)                                          │   │
│  │                                                             │   │
│  │ 备注: [_________________________________]                  │   │
│  │                                                             │   │
│  │      [⬅️ 上一个] [接受AI建议] [下一个 ➡️]                   │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 5. 第三阶段 - 建筑面积计算界面

#### 5.1 计算进行中
```
┌─────────────────────────────────────────────────────────────────────┐
│ 🧮 第三阶段: 建筑面积计算                           [⏸️ 暂停] [❌ 停止] │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  🔄 计算进度                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 总体进度: ████████████████████████████████████████ 92%      │   │
│  │ 预计剩余时间: 30秒                                          │   │
│  │                                                             │   │
│  │ 📋 计算步骤:                                                │   │
│  │ ✅ 楼层分类 (按层高规则)                                   │   │
│  │ ✅ 全计入面积计算: 3,245.8 m²                              │   │
│  │ ✅ 半计入面积计算: 456.2 m²                                │   │
│  │ ✅ 不计入面积统计: 892.5 m²                                │   │
│  │ 🔄 质量检查和验证                                           │   │
│  │ ⏳ 生成详细报告                                             │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  📊 实时计算结果                                                    │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 🏢 总建筑面积: 3,474.0 m²                                   │   │
│  │                                                             │   │
│  │ 📈 面积构成:                                                │   │
│  │ ████████████████████████████████████████████████ 93.4%     │   │
│  │ 全计入: 3,245.8 m²                                         │   │
│  │                                                             │   │
│  │ ████████ 6.6%                                               │   │
│  │ 半计入: 456.2 m² × 0.5 = 228.1 m²                         │   │
│  │                                                             │   │
│  │ 不计入: 892.5 m² (不纳入总面积)                            │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ⚠️ 质量检查                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ ✅ 所有元素已分类 (1,247/1,247)                            │   │
│  │ ✅ 计算规则一致性检查通过                                   │   │
│  │ ✅ 面积计算精度: ±0.1 m²                                   │   │
│  │ ⚠️ 发现3个潜在异常，建议复核                                │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

#### 5.2 最终结果展示
```
┌─────────────────────────────────────────────────────────────────────┐
│ 🎉 计算完成!                    [📊 详细报告] [📄 导出] [🔄 重新计算] │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  🏆 最终结果                                                        │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │                                                             │   │
│  │           🏢 总建筑面积: 3,474.0 m²                         │   │
│  │                                                             │   │
│  │  ┌─────────────────────────────────────────────────────┐   │   │
│  │  │ 📊 面积构成详情                                     │   │   │
│  │  │                                                     │   │   │
│  │  │ 全计入面积: 3,245.8 m² ████████████████████ 93.4%  │   │   │
│  │  │ 半计入面积:   228.1 m² ██ 6.6%                     │   │   │
│  │  │ 不计入面积:   892.5 m² (不纳入总计)                │   │   │
│  │  └─────────────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  📋 按楼层统计                                    [🔍 展开详情]      │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 🏢 地上部分 (1-15层)                                        │   │
│  │ ├─ 1-3层 (商业): 245.2 m²/层 × 3 = 735.6 m²               │   │
│  │ ├─ 4-15层 (办公): 209.5 m²/层 × 12 = 2,514.0 m²           │   │
│  │ └─ 阳台/露台: 228.1 m² (半计入)                            │   │
│  │                                                             │   │
│  │ 🏠 地下部分 (B1-B2)                                         │   │
│  │ ├─ B1层 (停车): 446.3 m² (不计入)                          │   │
│  │ ├─ B2层 (设备): 446.2 m² (不计入)                          │   │
│  │ └─ 地下商业: 224.2 m² (计入)                               │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  🏗️ 按构件类型统计                               [🔍 展开详情]      │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 主体结构: 3,021.6 m² (全计入)                              │   │
│  │ 阳台: 456.2 m² (半计入 → 228.1 m²)                        │   │
│  │ 电梯井: 89.4 m² (全计入)                                   │   │
│  │ 楼梯间: 134.8 m² (全计入)                                  │   │
│  │ 停车位: 892.5 m² (不计入)                                  │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  ✅ 质量保证                                                        │
│  • 计算精度: ±0.1 m²                                               │
│  • 规则符合度: 100%                                                │
│  • 人工审核: 26个元素已确认                                        │
│  • 处理时间: 总计12分35秒                                          │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 6. 详细报告界面

```
┌─────────────────────────────────────────────────────────────────────┐
│ 📊 详细计算报告                                    [🖨️ 打印] [💾 保存] │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  📋 报告目录                                      [📄 切换到简版]    │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 1. 项目概况                                                 │   │
│  │ 2. 法规依据                                                 │   │
│  │ 3. 计算过程                                                 │   │
│  │ 4. 结果汇总                                                 │   │
│  │ 5. 质量控制                                                 │   │
│  │ 6. 附录                                                     │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  📖 1. 项目概况                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 项目名称: 办公楼A栋面积计算                                 │   │
│  │ 建筑类型: 办公建筑                                          │   │
│  │ 适用法规: 香港建筑面积计算规则                              │   │
│  │ 计算日期: 2024年1月15日                                     │   │
│  │ 计算软件: 建筑面积计算Framework v1.0                       │   │
│  │                                                             │   │
│  │ 建筑概况:                                                   │   │
│  │ • 总楼层: 17层 (地上15层 + 地下2层)                        │   │
│  │ • 建筑高度: 52.8m                                          │   │
│  │ • 建筑面积: 3,474.0 m²                                     │   │
│  │ • IFC元素: 1,247个                                         │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  📜 2. 法规依据                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │ 本次计算依据以下法规条款:                                   │   │
│  │                                                             │   │
│  │ 2.1 层高相关规则                                            │   │
│  │ • 层高≥2.2m: 全部计入建筑面积                              │   │
│  │ • 1.2m≤层高<2.2m: 按50%计入建筑面积                       │   │
│  │ • 层高<1.2m: 不计入建筑面积                                │   │
│  │                                                             │   │
│  │ 2.2 覆盖/围护构件规则                                       │   │
│  │ • 电梯井: 全部计入建筑面积                                 │   │
│  │ • 楼梯间: 全部计入建筑面积                                 │   │
│  │ • 有围护阳台: 按50%计入建筑面积                            │   │
│  │ • 无围护露台: 不计入建筑面积                               │   │
│  │                                                             │   │
│  │ 2.3 特殊用途空间规则                                        │   │
│  │ • 停车位: 不计入建筑面积                                   │   │
│  │ • 设备房: 不计入建筑面积                                   │   │
│  │ • 地下商业: 计入建筑面积                                   │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│                                          [⬇️ 继续查看更多内容]      │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

## 用户体验优化特性

### 1. 智能提示系统
- 在每个操作步骤提供上下文相关的帮助信息
- 对于复杂概念提供悬浮解释
- 错误操作时给出具体的修正建议

### 2. 数据可视化
- 3D模型查看器，支持元素高亮和标注
- 面积计算结果的饼图和柱状图展示
- 进度条和实时状态更新

### 3. 协作功能
- 支持多用户同时查看项目
- 审核意见的批注和讨论功能
- 版本控制和变更历史追踪

### 4. 移动端适配
- 响应式设计，支持平板和手机查看
- 关键信息的简化展示
- 触摸友好的交互设计

### 5. 个性化设置
- 用户可自定义界面主题和布局
- 常用参数的预设和快速选择
- 个人工作习惯的学习和适应

这个详细的界面设计确保了用户在使用三agent联合framework时能够获得清晰、直观、高效的操作体验。